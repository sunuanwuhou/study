# Table of Contents

* [什么是死信队列](#什么是死信队列)
* [什么时候被重新消费](#什么时候被重新消费)
* [应用场景](#应用场景)


# 什么是死信队列

死信队列：没有**被及时消费**的消息存放的队列。

消息没有被及时消费有以下几点原因：

+ 消息被拒绝（basic.reject/ basic.nack）并且不再重新投递 requeue=false

+ TTL(time-to-live) 消息超时未消费

+ 达到最大队列长度



# 什么时候被重新消费

消息变成死信后，会被重新投递（publish）到另一个交换机上（Exchange）,这个交换机往往被称为DLX(dead-letter-exchange)“死信交换机”，然后交换机根据绑定规则转发到对应的队列上，监听该队列就可以被重新消费。

>  生产者-->发送消息-->交换机-->队列-->变成死信队列-->DLX交换机-->队列-->监听-->消费者





# 应用场景

1. 订单延迟处理。

   > 就是 **用户提交订单之后，发送一条消息并且设置消息过期时间为半个小时** (或其他时间)，如果超过设置的这个时间，那么消息自动变成死信，就会被转发到死信队列中，这时候我们可以监听死信队列中的消息，然后查询一下订单的状态，如果还是未支付的话，那么更新订单的状态为已取消。

2. 
