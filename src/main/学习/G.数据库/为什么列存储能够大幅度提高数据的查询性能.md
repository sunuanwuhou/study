# Table of Contents

* [什么是列存储](#什么是列存储)
* [列存储的特点](#列存储的特点)
* [为什么列式存储查询快](#为什么列式存储查询快)
* [缺点](#缺点)
* [参考资料](#参考资料)




# 什么是列存储

https://zhuanlan.zhihu.com/p/127823207



# 列存储的特点

为什么列存储能够大幅度提高数据的查询性能呢？要回答这个问题，首先必须明白SQL Server引擎是怎样读取数据的。在读取数据时，SQL Server每次都把所需数据所在的整个Page读取到内存中，Page是数据读取的最小单位。如果采用行存储，每一个Page都存储所有列的数据，每行的Size决定了单个Page能够存储的数据行数量。

我们可以粗略计算一下，如果一个数据行有10列，每列的平均Size是10B，一行的Size是100B，那么单个Page最多存储80行（8060B/100B）；如果采用列存储模式，那么单个Page可以存储806行（8060B/10B）。就单个Page存储的数据行数量而言，列存储是行存储的10倍，SQL Server引擎把一个Page读取到内存中，能够获取的数据行数量成10倍增加。

**因此，采用列存储模式时，每一个Page能够存储更多的数据行。**在加载列存储数据时，SQL Server只需要消耗少量的IO，就能把某一列的全部数据加载到缓存中。当从列很多的大表中读取几个列时，相比传统的行存储（Row Store）模式，列存储（Column Store）能够成千上万倍地提高数据的读取速度和查询性能。

> 适用于OLAP



# 为什么列式存储查询快

+ 使用压缩存储
+ 一次io可以查询更多的数据
+ 列式存储一般都是分布式存储，所以可以用分布式计算来加速查询



# 缺点

不过由于列式存储这种特性，所以大部分列式存储都是一次性写入，不能更新

为什么呢

**更新需要找到对应每一列的数据，成本毕竟大。还不做重写。**

所以你经常听到搞数据的说要**重刷重算**就是这么来的





# 参考资料

https://mp.weixin.qq.com/s/m0TN-jpClh5Za2fOEEkqYw
