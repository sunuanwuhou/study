# Table of Contents

      * [为什么要使用[状态机](https://so.csdn.net/so/search?q=状态机&spm=1001.2101.3001.7020)？](#为什么要使用状态机httpssocsdnnetsosearchq状态机spm1001210130017020)
      * [什么是状态机？](#什么是状态机)


#### 为什么要使用[状态机](https://so.csdn.net/so/search?q=状态机&spm=1001.2101.3001.7020)？

如果你写过很复杂的流程系统，流程系统中涉及多步操作，流程达到不同的状态需要有不同的处理，同时状态间的转换也是有特定逻辑的。如果不使用状态机，那么你的代码我估计会有大量的if判断语句，你得判断某个操作指令过来了，当前这个状态是否能执行该指令。当程序需要异常终止，你需要在本不该对数据库进行操作的状态对数据库进行操作，进而导致到处都在操作数据库，一旦数据库出现数据异常，很难确定时哪里出现了问题。给修改bug带来了极大的困难。如果你有上面的困惑，那么我建议你修改代码模式，如果你的代码中存在大量的if elseif，你可以用反射，也可以用策略模式或者状态模式。如果你的系统中很明显就是一个状态流传的逻辑，那么我强烈建议你使用有限状态机重构自己的代码。有限状态机可以解决上面的问题。

#### 什么是状态机？

从我的实际经验来讲，有限状态机可以看作是有向有环图。有向，因为状态一般是以一个状态到另一个状态；有环，因为流程很有可能出现失败然后重新定位到前面某个状态节点。如下所示：

![image-20230516211552168](.images/image-20230516211552168.png)

https://juejin.cn/post/7155277462380183565
